<!doctype html>
<html>
	<head>
		<title>Game of Life</title>
		<link rel="stylesheet" href="./styles/styles.css" />
		<script src="./js/drawGrid.js"></script>
		<script src="./js/drawBip.js"></script>
	</head>
	<body>
		<h1>Welcome to the game of life!</h1>
		<canvas id='main' width='800' height='400'></canvas>
		<div>
			<label>X Position</label>
			<input id='xpos' type='text'/>
		</div>
		<div>
			<label>Y Position</label>
			<input id='ypos' type='text'/>
		</div>
		<div>
			<button onclick=handleButtonClick()>Flip Bip</button>
		</div>
		<script>
			function initializeBips(xSize, ySize, initialBips) {
				let newBips = [];
				for (let x = 0; x < xSize; x++) {
					let xRow = [];
					for (let y = 0; y < ySize; y++) {
						xRow.push({x: x, y: y, alive: false})
					}
					newBips.push(xRow);
				}
				return newBips;
			}

			function handleButtonClick() {
				let x = parseInt(document.getElementById('xpos').value);
				let y = parseInt(document.getElementById('ypos').value);
				flipBip(x, y);
				refreshBoard(ctx, bips);
			}

			function clearBoard(ctx) {
				ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
			}

			function drawBoard(ctx, bips) {
				drawGrid(ctx);
				for(var xRows of bips) {
					for(var b of xRows) {
						drawBip(ctx, {x: b.x, y:b.y, s:scale, value: b.alive});
					}
				}
			}

			function refreshBoard(ctx, bips) {
				clearBoard(ctx);
				drawBoard(ctx, bips);
			}

			function flipBip(x, y) {
				let newVal = !bips[x][y].alive;
				bips[x][y] = {x: x, y: y, alive: newVal};
			}

			function repopulateBips(x, y) {

			}

			let scale = 10;
			let ctx = document.getElementById('main').getContext('2d');
			let xSize = ctx.canvas.width / scale;
			let ySize = ctx.canvas.height / scale;
			let bips = initializeBips(xSize, ySize);
			drawBoard(ctx, bips)
		</script>
	</body>
</html>